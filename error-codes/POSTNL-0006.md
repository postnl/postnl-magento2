---

title: "Cron werkt niet correct"

code: POSTNL-0006

---



<p></p><h3>Probleem</h3><p>Boven elke pagina in de backend staat:</p><p>"PostNL: It appears that your cron is not working properly. PostNL requires the cron to be active in order to function."</p><p>"PostNL: Uw cron lijkt niet correct te functioneren. PostNL heeft de cron nodig om correct te functioneren."</p><p></p><h3>Oplossing</h3><p>Er zijn twee methoden om uw klanten te voorzien van Track &amp; Trace informatie:</p><p>1. Automatische e-mails op basis van de cronjob.</p><p>2. Handmatige e-mail op basis van de button "Send tracking information".</p><p>In de configuratie van de extensie kunt u kiezen welke methode u wilt gebruiken in het tabblad "Track&amp; Trace" van de Geavanceerde instellingen.<br>Ook zonder werkende cron kunt u dus uw klanten voorzien van Track&amp;Trace informatie. Wij adviseren andere niet zichtbare functionaliteiten van de extensie wel om de Magento cron te laten draaien.</p><p>De PostNL extensie maakt gebruik van enkele cronjobs. Deze zijn nodig om de statussen van zendingen bij periodiek bij te werken indien u hiervoor heeft gekozen in de configuratie van de extensie. De extensie haakt in op de cron functionaliteit van Magento.</p><p>Mocht deze melding niet verdwijnen binnen een uur na installatie dan zijn er twee mogelijke oorzaken:<br>1. Er is op de server geen actieve cronjob ingesteld.<br>2. Magento cron functionaliteit is niet actief.</p><p><span style="text-decoration: underline;">Server cronjob</span><br>De wijze waarop u cronjobs op uw server instelt verschilt per hostingprovider omdat er meerdere webserverbeheer systemen bestaan. Voorbeelden hiervan zijn DirectAdmin, Plesk en Cpanel. <br>Hieronder vindt u een voorbeeld van de wijze waarop u een cronjob instelt voor de DirectAdmin van Magento.</p><p>1. Ga naar het account waar de Magento omgeving op draait en klik "Cronjobs" aan.<br><br><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="{{site.baseurl}}/assets/images/POSTNL-0006_0.png" data-image-src="/download/attachments/8553862/cronjob11.png?version=1&amp;modificationDate=1496072700000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="14876897" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="cronjob11.png" data-base-url="https://docs.tig.nl" data-linked-resource-content-type="image/png" data-linked-resource-container-id="8553862" data-linked-resource-container-version="2" alt=""></span></p><p>2. Voor een Magento Community webshop stelt u in dat de cronjob elke 5 minuten geactiveerd moet worden (zoals in onderstaand voorbeeld). Voor een Magento Enterprise stelt u in dat de cronjob elke minuut geactiveerd moet worden.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="{{site.baseurl}}/assets/images/POSTNL-0006_1.png" data-image-src="/download/attachments/8553862/cronjob2.png?version=1&amp;modificationDate=1496072710000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="14876898" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="cronjob2.png" data-base-url="https://docs.tig.nl" data-linked-resource-content-type="image/png" data-linked-resource-container-id="8553862" data-linked-resource-container-version="2" alt=""></span></p><p>3. Controleer met SSH of u de cronjob kunt activeren.<br>Dit kan door in een terminal venster in te loggen en het command in te voeren. In ons voorbeeld is dat "/home/magento/public_html/cron.sh". Dit dient u te doen met root rechten.</p><p>Mocht dit niet werken of mocht uw server geen shell mogelijkheid hebben dan kunt u uitwijken naar het cron.php bestand.&Acirc;&nbsp;</p><p>In dat geval dient u twee cronjobs aan te maken. U dient aan te geven waar PHP draait voor de opdrachten. U kunt deze locatie achterhalen met de PHP constante PHP_BINDIR.</p><p>Achter de opdrachten dient u een parameter te plaatsen:</p><p>Opdracht 1: cron.php -malways 1</p><p>Opdracht 2: cron.php -mdefault 1</p><p>Zie onderstaand screenshot voor een voorbeeld.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="{{site.baseurl}}/assets/images/POSTNL-0006_2.png" data-image-src="/download/attachments/8553862/Screen_Shot_2014-06-04_at_13.05_.02_.png?version=1&amp;modificationDate=1496072716000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="14876899" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="Screen_Shot_2014-06-04_at_13.05_.02_.png" data-base-url="https://docs.tig.nl" data-linked-resource-content-type="image/png" data-linked-resource-container-id="8553862" data-linked-resource-container-version="2" alt=""></span></p><p>4. Zorg dat uw cron.sh (of cron.php) bestand 755 rechten heeft.</p><p>De server roept nu elke 5 minuten (Community Edition) of elke minuut (Enterprise Edition) de cron functionaliteit van Magento aan.</p><p><span style="text-decoration: underline;">Magento cron</span></p><p>1. Ga naar het menu System &gt; Configuration &gt; Advanced &gt; System &gt; Cron (Scheduled Tasks).</p><p>2. Zorg dat de instellingen gelijk zijn aan onderstaande afbeelding.</p><p><span class="confluence-embedded-file-wrapper"><img class="confluence-embedded-image" draggable="false" src="{{site.baseurl}}/assets/images/POSTNL-0006_3.png" data-image-src="/download/attachments/8553862/cron31.png?version=1&amp;modificationDate=1496072721000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="14876900" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="cron31.png" data-base-url="https://docs.tig.nl" data-linked-resource-content-type="image/png" data-linked-resource-container-id="8553862" data-linked-resource-container-version="2" alt=""></span></p><p>Nadat de cron actief is kan het enige tijd duren voor de melding verdwijnt, er zal namelijk een wachtrij aan taken voor de cron zijn.&Acirc;&nbsp;<br>U kunt het best de database openen en de table "cron_schedule" openen. Die zal direct gevuld worden en daarin kunt u zien of de aanpassingen effect hebben.</p></div>


